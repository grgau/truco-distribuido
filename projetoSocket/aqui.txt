Gerv 01/06 {
    Estruturas
        card: estrutura de uma carta
            card->card = número da carta
            card->suit = naipe da carta

        player: estrutura de cada um dos players
            player->ID = id do player no jogo
            player->ip = ip relacionado ao player
            player->port = porta usada para conexão com o player

        subs: estrutura de uma substring (usada para separar a mensagem recebida)
            subs->info = texto em si
            subs->prox = ponteiro para próxima subs da mensagem


    Recebimento de mensagens

    --- createSocket(char *ip,int port);
            ip: ip da conexão
            port: porta da conexão

            retorna socket criado
                ex: sock = createSocket("127.0.0.1",14000);


    --- receiveData(int sock,subs *message);
            sock: socket de quem receberá mensagem
            message: ponteiro para estruturar mensagem

            retorna inicio da mensagem
                ex: message = receiveData(sock,message);


    --- receivePlayers(subs *message,player *players);
            message: primeiro nó da mensagem com informação de players
            players: vetor de players

            não retorna nada
                ex: receivePlayers(message->prox,players);


    --- receiveCards(subs *message,card *cards);
            message: primeiro nó da mensagem com informação de cartas
            cards: vetor de cartas

            não retorna nada
                ex: receiveCard(message->prox,cards);


    --- receiveVira(subs *message,card *vira, char *IDStart);
            message: primeiro nó da mensagem com informação da vira
            vira: carta vira
            IDStart: id do jogador que inicia (virá da mensagem)

            não retorna nada
                ex: receiveVira(message->prox,vira,IDStart);

    Envio de mensagens

    --- sendData(char *comando,card *cards,int index, int sock);
            comando: comando dado (ex: DESCE,MC,EC,TRUCO)
            carta: vetor de cartas (ou NULL se não jogará carta)
            index: indice da carta a ser jogada
            sock: socket para o qual a mensagem irá

            não retorna nada
                ex: sendData("MC",cards,2,dealer);

    Rodar
        gcc -o server server.c
        ./server

        gcc -o client client.c
        ./client
}

ESPECIFICAÇÃO

    Projeto: Partida de truco :::
     
    Cada grupo deve desenvolver um jogador da mesa, usando sockets em C, sem identificação de quem será parceiro de quem (isso será definido pelo servidor, no início de cada partida). Todo jogador terá conhecimento das cartas jogadas pelos demais jogadores, permitindo sua tomada de decisão.
     
    Dado que os processos são inerentemente rápidos, cada jogada deve ser precedida por uma espera de 5 segundos, para que seja possível identificar o que está ocorrendo.
     
    Todo jogador deve mostrar na sua saída padrão (terminal de vídeo) o que está ocorrendo a cada jogada.
     
    Ao final de cada partida (alguma dupla somar 12 pontos), o servidor dará reinício alterando a ordem dos jogadores, assim as duplas eventualmente serão alteradas.
     
    O endereço IP do servidor e dos jogadores deverá ser informado ao começar a primeira partida, sendo o endereço do servidor recebido como parâmetro da linha de comando.
     
    O jogo deve começar com todos os jogadores enviando ao servidor o seu nome, endereço IP e porta para comunicação com demais jogadores, na forma:
       ≪ "ID", endereçoIP, porta ≫

    O servidor fará então o broadcast dessas informações assim que receber os dados dos quatro jogadores, sendo que ele indicará nesse momento a posição de cada jogador na mesa, sendo que id1 será parceiro de id3 e id2 será parceiro de id4. A mensagem terá a forma:
       ≪ "MESA", id1, IP1, porta1, id2, IP2, porta2, id3, IP3, porta3, id4, IP4, porta4 ≫

    Essa mensagem deve ser usada pelos jogadores para identificar com quem devem conversar a cada momento e quem é seu parceiro, para poder contar a pontuação de cada mão de jogo.
     

    A porta de comunicação com o servidor será a 14000. Entre jogadores será definida pela mensagem inicial enviada por cada um deles.
     

    Nas mensagens descritas abaixo, se considera que as em vermelho são originadas pelo servidor, as em azul são originadas por um jogador e enviadas ao servidor e as em preto são trocadas entre os jogadores.
     

    Mensagens possíveis:

        Notifica fim de rodada, com conteúdo dado por
        ≪ "FR", nomeganhador, pontos ≫ servidor para jogadores
        Passa cartas, individualmente para cada jogador, sendo
        ≪ "CARTA", carta1, carta2, carta3 ≫ servidor para jogadores
        Passa o vira e indica primeiro jogador, broadcast para os quatro jogadores, sendo
        ≪ "VIRA", carta, identificador ≫ servidor para jogadores
        Jogada, broadcast para os três jogadores e servidor, sendo:
            Mostra carta, sendo:
            ≪ "MC", carta ≫ jogador para servidor
            Esconde carta, sendo:
            ≪ "EC", NULL ≫ jogador para os demais jogadores
            ≪ "EC", carta ≫ jogador para o servidor
            Truca, sendo:
            ≪ "TRUCO", NULL ≫ jogador para jogadores e servidor
            Aceita o truco, sendo:
            ≪ "DESCE", NULL ≫ jogador para jogadores e servidor
            Desiste do truco, sendo:
            ≪ "FORA", NULL ≫ jogador para jogadores e servidor

    Qualquer que seja a jogada é preciso que o jogador se "desfaça" de uma carta, ou apresentando ela aos demais ou devolvendo ao servidor

    No caso de ocorrer truco, não será possível pedir 6. Só é possível aceitar ou desistir.

    Para que o truco seja aceito é preciso que os dois adversários entrem em acordo, o que significa que devem ser recebidas duas respostas ao truco.

    Todas as mensagens são compostas apenas por strings de caracteres separados por vírgulas (até mesmo o valor de "pontos").

    As cartas serão representadas por uma letra ('O', 'C', 'E' e 'P') seguida de um número, sendo que ás=1, dama=8, valete=9 e rei=10. Assim, por exemplo, o sete de copas seria representado por "C7", já o ás de espadas seria "E1".


    PRAZO PARA ENTREGA: 05/06/2018, até 23h59 por e-mail com o código fonte do jogador. 